<nav id="sidebar">
  {% macro render_sidebar(item) %}
    <li>
      <a class="normalize-link" href="{{ item.url|url }}">{{ item.title }}</a>
      {% if item.children %}
        <ul>
          {% for child in item.children %}
            {{ render_sidebar(child) }}
          {% endfor %}
        </ul>
      {% endif %}
    </li>
  {% endmacro %}

  <ul>
    {% set active = nav | selectattr('active', 'true') | list %}

    {% if active | length > 0 and page.meta.sidebar|default(true) %}
      {{ render_sidebar(active | first) }}
    {% endif %}
  </ul>
</nav>
